(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{18:function(e,a,t){e.exports=t.p+"static/media/Aryan-Holding-Group-Logo.0f32621a.png"},21:function(e,a,t){e.exports=t(37)},27:function(e,a,t){},35:function(e,a,t){},37:function(e,a,t){"use strict";t.r(a);var n=t(0),l=t.n(n),s=t(17),c=t.n(s),r=(t(27),t(19)),o=t(10),i=t(3),m=t(4),d=t(7),u=t(5),h=t(8),E=t(39),f=t(41),N=t(38),p=t(40),g=t(11),v=t.n(g),b="http://139.59.71.45:8080",y=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).openNotification=function(e,a){v.a[e](l.a.createElement("strong",null,a),{duration:5})},t.handleChange=function(e){t.setState(Object(o.a)({},e.target.name,e.target.value))},t.forgotPasswordDialogue=function(){t.setState({style1:"is-active"})},t.closeModal=function(){t.setState({style1:"",style2:""})},t.forgotPassword=function(e){e.preventDefault();var a=t.state.email,n=JSON.stringify({email:a});console.log(n),console.log("test");var l=localStorage.getItem("token");fetch("".concat(b,"/admin/forgot-password"),{method:"POST",body:n,headers:{"Content-Type":"application/json","x-auth-token":l}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?(console.log(e),t.openNotification("error",e.message)):(console.log(e),t.setState({style1:"",style2:"is-active"}),t.openNotification("success",e.message))}).catch(function(e){return console.log(e)})},t.recoverPassword=function(e){e.preventDefault();var a=t.state,n=a.code,l=a.password,s=a.email,c=JSON.stringify({code:n,password:l,email:s});console.log(c),console.log("test");var r=localStorage.getItem("token");fetch("".concat(b,"/admin/recover-password"),{method:"POST",body:c,headers:{"Content-Type":"application/json","x-auth-token":r}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?(console.log(e),t.openNotification("error",e.data)):(console.log(e),t.setState({style2:"",email:"",password:""}),t.openNotification("success",e.message))}).catch(function(e){return console.log(e)})},t.state={email:"",password:"",code:"",style1:"",style2:""},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.email,s=a.password,c=a.style1,r=a.style2;return l.a.createElement(n.Fragment,null,l.a.createElement("form",{onSubmit:function(a){return e.props.login(a,t,s)}},l.a.createElement("div",{className:"columns is-centered login-form"},l.a.createElement("div",{className:"column is-one-third"},l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Email"),l.a.createElement("p",{className:"control has-icons-left has-icons-right"},l.a.createElement("input",{className:"input",type:"email",placeholder:"Email",name:"email",onChange:this.handleChange,value:t,required:!0}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-envelope"})),l.a.createElement("span",{className:"icon is-small is-right"}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Password"),l.a.createElement("p",{className:"control has-icons-left"},l.a.createElement("input",{className:"input",type:"password",placeholder:"Password",name:"password",onChange:this.handleChange,value:s,required:!0}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-lock"}))),l.a.createElement("a",{onClick:this.forgotPasswordDialogue,className:"help"},"Forgot Password")),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control"},l.a.createElement("button",{className:"button is-success"},"Login")))))))),l.a.createElement("div",{className:"modal ".concat(c)},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-content",style:{zIndex:1}},l.a.createElement("div",{className:"tile is-parent"},l.a.createElement("article",{className:"tile is-child notification "},l.a.createElement("div",{className:"content"},l.a.createElement("form",{onSubmit:this.forgotPassword},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Email Address"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"email",name:"email",placeholder:"Email Address",onChange:this.handleChange,required:!0}))),l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-primary",type:"submit"},"Submit"))))))),l.a.createElement("div",{onClick:this.closeModal,style:{minWidth:"100%",minHeight:"100%",position:"absolute"}},l.a.createElement("button",{className:"modal-close is-large","aria-label":"close"}))),l.a.createElement("div",{className:"modal ".concat(r)},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-content",style:{zIndex:1}},l.a.createElement("div",{className:"tile is-parent"},l.a.createElement("article",{className:"tile is-child notification "},l.a.createElement("div",{className:"content"},l.a.createElement("form",{onSubmit:this.recoverPassword},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Code"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"text",name:"code",placeholder:"Code",onChange:this.handleChange,required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"New Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"password",name:"password",placeholder:"New Password",onChange:this.handleChange,required:!0}))),l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-primary",type:"submit"},"Submit"))))))),l.a.createElement("div",{onClick:this.closeModal,style:{minWidth:"100%",minHeight:"100%",position:"absolute"}},l.a.createElement("button",{className:"modal-close is-large","aria-label":"close"}))))}}]),a}(n.Component),w=t(18),C=t.n(w),x=function(e){var a=e.loggedIn;return l.a.createElement(n.Fragment,null,l.a.createElement("nav",{className:"navbar is-dark",role:"navigation","aria-label":"main navigation"},l.a.createElement("div",{className:"container is-widescreen"},l.a.createElement("div",{className:"navbar-brand"},l.a.createElement("a",{className:"navbar-item",href:"/"},l.a.createElement("img",{src:C.a,width:"112",height:"28"})),l.a.createElement("a",{role:"button",className:"navbar-burger burger","aria-label":"menu","aria-expanded":"false","data-target":"navbarBasicExample"},l.a.createElement("span",{"aria-hidden":"true"}),l.a.createElement("span",{"aria-hidden":"true"}),l.a.createElement("span",{"aria-hidden":"true"}))),l.a.createElement("div",{id:"navbarBasicExample",className:"navbar-menu"},l.a.createElement("div",{className:"navbar-start"}),a?l.a.createElement("div",{className:"navbar-end"},l.a.createElement("div",{className:"navbar-item"},l.a.createElement("div",{className:"buttons"},l.a.createElement("a",{className:"button is-link",onClick:e.changePassword},"Change Password"))),l.a.createElement("div",{className:"navbar-item"},l.a.createElement("div",{className:"buttons"},l.a.createElement("a",{className:"button is-light",onClick:e.logOut},"Log Out")))):""))))},k=function(e){return l.a.createElement(n.Fragment,null,l.a.createElement(x,{loggedIn:!0,logOut:e.logOut,changePassword:e.changePassword}))},S=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).componentDidMount=function(){var e=t.props,a=e.restaurant;e.editing&&t.setState({name:a.name,email:a.email,phoneNo:a.phoneNo,taxNo:a.taxNo,line1:a.address.line1,line2:a.address.line2,city:a.address.city,pin:a.address.pin,state:a.address.state,country:a.address.country,description:a.description,accountNumber:a.accountNumber,id:a._id,website:a.website})},t.handleChange=function(e){t.setState(Object(o.a)({},e.target.name,e.target.value))},t.state={restaurant:[],name:"",email:"",phoneNo:"",taxNo:"",line1:"",line2:"",city:"",pin:"",state:"",country:"",description:"",managerEmail:"",style:"",id:"",accountNumber:"",website:""},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this;console.log(this.props);var a=this.props.editing,t=this.state,n=t.name,s=t.email,c=t.phoneNo,r=t.taxNo,o=t.line1,i=t.line2,m=t.city,d=t.state,u=t.pin,h=t.country,E=t.description,f=t.managerEmail,N=t.accountNumber,p=t.id,g=t.website;return l.a.createElement("form",{onSubmit:function(t){return e.props.saveRestaurant(t,a,n,s,c,r,o,i,m,u,d,h,E,f,N,p,g)}},l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Name")),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"text",name:"name",placeholder:"Restaurant Name",value:n,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-user"})))))),l.a.createElement("div",{className:"field is-horizontal "},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Website")),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field "},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"text",name:"website",placeholder:"Website",value:g,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{class:"fas fa-link"})))),l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Email")),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"email",name:"email",placeholder:"Email",value:s,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-envelope"})))))),l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Phone Number")),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"number",name:"phoneNo",placeholder:"Phone No.",value:c,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-phone"})))),l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Tax No.")),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"number",name:"taxNo",placeholder:"Tax No.",value:r,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-file-alt"})))))),l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Address Line 1")),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"text",name:"line1",placeholder:"Address line 1",value:o,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-address-card"})))),l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Line 2")),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"text",name:"line2",placeholder:"Address line 2",value:i,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-address-card"})))))),l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"City")),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"text",name:"city",placeholder:"City",value:m,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-city"})))),l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"PIN")),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"number",name:"pin",placeholder:"PIN",value:u,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-map-marker-alt"})))))),l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"State")),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"text",name:"state",placeholder:"State",value:d,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-city"})))),l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Country")),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"text",name:"country",placeholder:"Country",value:h,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-globe-asia"})))))),l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},a?"":l.a.createElement("label",{className:"label"},"Manager Email")),l.a.createElement("div",{className:"field-body"},a?"":l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"email",name:"managerEmail",placeholder:"Email",value:f,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{className:"fas fa-envelope"})))),l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Account Number")),l.a.createElement("div",{className:"field"},l.a.createElement("p",{className:"control is-expanded has-icons-left"},l.a.createElement("input",{required:!0,className:"input",type:"text",name:"accountNumber",placeholder:"Account Number",value:N,onChange:this.handleChange}),l.a.createElement("span",{className:"icon is-small is-left"},l.a.createElement("i",{class:"fas fa-piggy-bank"})))))),l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{className:"label"},"Description")),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},l.a.createElement("textarea",{className:"textarea",name:"description",value:E,onChange:this.handleChange}))))),l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label"}),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},a?l.a.createElement("button",{className:"button is-primary"},"Save Restaurant"):l.a.createElement("button",{className:"button is-primary"},"Add Restaurant"))))))}}]),a}(n.Component),O=(t(16),function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).handleChange=function(e){t.setState(Object(o.a)({},e.target.name,e.target.value))},t.openNotification=function(e,a){v.a[e](l.a.createElement("strong",null,a),{duration:5})},t.addRestaurant=function(e,a,n,l,s,c,r,o,i,m,d,u,h,E,f,N){if(e.preventDefault(),!a){var p=localStorage.getItem("token"),g=JSON.stringify({name:n,phoneNo:s,email:l,taxNo:c,line1:r,line2:o,city:i,pin:m,state:d,country:u,description:h,managerEmail:E,accountNumber:f,website:N});fetch("".concat(b,"/admin/addrestaurant"),{method:"POST",body:g,headers:{"Content-Type":"application/json","x-auth-token":p}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?(console.log("errors"),t.openNotification("error",e.data)):(t.setState({style:"is-active",id:e.data._id}),t.openNotification("success",e.message))}).catch(function(e){return console.log(e)})}},t.handleIconChange=function(e){var a=t.state.id,n=e.target.files[0],l=new FormData;l.append("logo",n);var s=localStorage.getItem("token");fetch("".concat(b,"/admin/restaurant/").concat(a,"/logo"),{method:"POST",body:l,headers:{"x-auth-token":s}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?(console.log(e),t.openNotification("error",e.data)):(t.setState({style:""}),t.props.history.push("/"),t.openNotification("success",e.message))}).catch(function(e){return console.log(e)})},t.closeModal=function(){t.setState({style:""})},t.state={name:"",email:"",phoneNo:"",taxNo:"",line1:"",line2:"",city:"",pin:"",state:"",country:"",description:"",managerEmail:"",style:"",id:"",accountNumber:"",website:""},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=this.state.style;return l.a.createElement(n.Fragment,null,l.a.createElement(S,{editing:!1,saveRestaurant:function(a,t,n,l,s,c,r,o,i,m,d,u,h,E,f,N){return e.addRestaurant(a,t,n,l,s,c,r,o,i,m,d,u,h,E,f,N)}}),l.a.createElement("div",{className:"modal ".concat(a)},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-content",style:{zIndex:1}},l.a.createElement("div",{className:"tile is-parent"},l.a.createElement("article",{className:"tile is-child notification "},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"file"},l.a.createElement("label",{className:"file-label"},l.a.createElement("input",{style:{color:"#333"},className:"file-input",type:"file",name:"icon",onChange:this.handleIconChange}),l.a.createElement("span",{className:"file-cta"},l.a.createElement("span",{className:"file-icon"},l.a.createElement("i",{className:"fas fa-upload"})),l.a.createElement("span",{className:"file-label"},"Choose a file\u2026")))))))),l.a.createElement("div",{onClick:this.closeModal,style:{minWidth:"100%",minHeight:"100%",position:"absolute"}},l.a.createElement("button",{className:"modal-close is-large","aria-label":"close"}))))}}]),a}(n.Component)),j=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).componentDidMount=function(){t.setState({restaurant:t.props.restaurant})},t.handleRestaurantEdit=function(){t.setState(function(e){return{editing:!e.editing}})},t.saveRestaurant=function(e,a,n,l,s,c,r,o,i,m,d,u,h,E,f,N,p){e.preventDefault();var g=JSON.stringify({name:n,email:l,phoneNo:s,taxNo:c,line1:r,line2:o,city:i,pin:m,state:d,country:u,description:h,accountNumber:f,website:p}),v=localStorage.getItem("token");fetch("".concat(b,"/admin/restaurant/").concat(N),{method:"PUT",body:g,headers:{"Content-Type":"application/json","x-auth-token":v}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?(console.log("errors"),t.openNotification("error",e.data)):(console.log(e),t.openNotification("success",e.message))}).catch(function(e){return console.log(e)})},t.state={editing:!1,restaurant:[]},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=this.props.restaurant,t=this.state.editing;return t?t?l.a.createElement(S,{editing:!0,restaurant:a,saveRestaurant:function(a,t,n,l,s,c,r,o,i,m,d,u,h,E,f,N,p){return e.saveRestaurant(a,t,n,l,s,c,r,o,i,m,d,u,h,E,f,N,p)}}):void 0:l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"columns is-centered"},l.a.createElement("div",{className:"column"},l.a.createElement("div",{className:"card"},l.a.createElement("header",{className:"card-header"},l.a.createElement("p",{className:"card-header-title"},a.name),l.a.createElement("a",{onClick:this.handleRestaurantEdit,className:"card-header-icon","aria-label":"more options"},"Edit")),l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column"},l.a.createElement("img",{src:"".concat(b,"/").concat(a.logo),style:{maxWidth:160,maxHeight:160}})),l.a.createElement("div",{className:"column"},l.a.createElement("p",null,a.description),l.a.createElement("p",null,a.website))),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column has-text-weight-semibold"},"Restaurant Email"),l.a.createElement("div",{className:"column"},a.email)),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column has-text-weight-semibold"},"Phone No."),l.a.createElement("div",{className:"column"},a.phoneNo)),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column has-text-weight-semibold"},"Tax No."),l.a.createElement("div",{className:"column"},a.taxNo)),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column has-text-weight-semibold"},"Account No."),l.a.createElement("div",{className:"column"},a.accountNumber)),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column has-text-weight-semibold"},"Address"),l.a.createElement("div",{className:"column"},l.a.createElement("p",null,a.address.line1,", ",a.address.line2),l.a.createElement("p",null,a.address.city,", ",a.address.pin),l.a.createElement("p",null,a.address.state,","," ",a.address.country))),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column has-text-weight-semibold"},"Manager Name"),l.a.createElement("div",{className:"column"},a.employeeId.firstName," ",a.employeeId.lastName)),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column has-text-weight-semibold"},"Manager Email"),l.a.createElement("div",{className:"column"},a.employeeId.email))))))))}}]),a}(n.Component),P=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).componentDidMount=function(){var e=localStorage.getItem("token");fetch("".concat(b,"/admin/restaurant"),{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":e}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?console.log(e):(console.log(e.data),t.setState({restaurants:e.data,isLoaded:!0}))}).catch(function(e){return console.log(e)})},t.showRestaurant=function(e){t.setState({currentPage:"singleRestaurant",restaurant:e})},t.state={restaurants:[],restaurant:[],isLoaded:!1,currentPage:"restaurantList"},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this;console.log(this.state);var a=this.state,t=a.restaurants,s=a.isLoaded,c=a.restaurant,r=a.currentPage;return"true"===localStorage.getItem("loggedIn")?s?"restaurantList"===r?l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"columns is-centered"},l.a.createElement("div",{className:"column"},l.a.createElement("table",{className:"table is-fullwidth"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("abbr",{title:"Serial Number"},"S.No.")),l.a.createElement("th",null,"Name"),l.a.createElement("th",null,"Email"),l.a.createElement("th",null,"Phone No."),l.a.createElement("th",null,"Address"),l.a.createElement("th",null,"Icon"))),l.a.createElement("tbody",null,t.map(function(a,t){return l.a.createElement("tr",{key:a.phoneNo},l.a.createElement("td",null,t+1),l.a.createElement("td",null,l.a.createElement("a",{onClick:function(){return e.showRestaurant(a)}},a.name)),l.a.createElement("td",null,a.email),l.a.createElement("td",null,a.phoneNo),l.a.createElement("td",null,a.address.line1,", ",a.address.line2,","," ",a.address.city,", ",a.address.pin,","," ",a.address.state,", ",a.address.country),l.a.createElement("td",null,l.a.createElement("img",{src:a.logo?"".concat(b,"/").concat(a.logo):"",style:{maxWidth:"100px",height:"auto"}})))})))))):"singleRestaurant"==r?l.a.createElement(n.Fragment,null,l.a.createElement(j,{restaurant:c})):l.a.createElement("div",null,"error!!"):l.a.createElement(n.Fragment,null,"Loading..."):l.a.createElement(n.Fragment,null)}}]),a}(n.Component),I=function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).componentDidMount=function(){t.showIcons()},t.openNotification=function(e,a){v.a[e](l.a.createElement("strong",null,a),{duration:5})},t.showIcons=function(){var e=localStorage.getItem("token");fetch("".concat(b,"/admin/icon"),{method:"GET",headers:{"x-auth-token":e}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?console.log(e):t.setState({icons:e.data,isLoaded:!0})}).catch(function(e){return console.log(e)})},t.handleChange=function(e){var a=e.target.files[0],n=new FormData;n.append("icon",a);var l=localStorage.getItem("token");fetch("".concat(b,"/admin/icon"),{method:"POST",body:n,headers:{"x-auth-token":l}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?(console.log(e),t.openNotification("error",e.data)):(t.showIcons(),t.openNotification("success",e.message))}).catch(function(e){return console.log(e)})},t.deleteIcon=function(e){var a=localStorage.getItem("token");fetch("".concat(b,"/admin/icon/").concat(e),{method:"DELETE",headers:{"x-auth-token":a}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?(console.log(e),t.openNotification("success",e.data)):(t.showIcons(),t.openNotification("success",e.message))}).catch(function(e){return console.log(e)})},t.state={isLoaded:!1,icons:[]},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.icons,n=a.isLoaded;return l.a.createElement("div",null,l.a.createElement("div",{className:"tile is-parent"},l.a.createElement("article",{className:"tile is-child notification "},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"file"},l.a.createElement("label",{className:"file-label"},l.a.createElement("input",{className:"file-input",type:"file",name:"icon",onChange:this.handleChange}),l.a.createElement("span",{className:"file-cta"},l.a.createElement("span",{className:"file-icon"},l.a.createElement("i",{className:"fas fa-upload"})),l.a.createElement("span",{className:"file-label"},"Choose a file\u2026"))))))),l.a.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},n?t.map(function(a,t){return l.a.createElement("div",{className:"image-icon-box",key:a._id},l.a.createElement("img",{src:"".concat(b,"/").concat(a.path),className:"image-icon",alt:"icon"}),l.a.createElement("a",{className:"delete is-medium",onClick:function(){return e.deleteIcon(a._id)}}))}):"Loading..."))}}]),a}(n.Component),T=t(42),q=function(){return l.a.createElement("aside",{className:"menu"},l.a.createElement("p",{className:"menu-label"},"General"),l.a.createElement("ul",{className:"menu-list"},l.a.createElement("li",null,l.a.createElement(T.a,{exact:!0,to:"/",activeClassName:"is-active"},"List Restaurants")),l.a.createElement("li",null,l.a.createElement(T.a,{exact:!0,to:"/add-restaurant",activeClassName:"is-active"},"Add Restaurants")),l.a.createElement("li",null,l.a.createElement(T.a,{exact:!0,to:"/add-icons",activeClassName:"is-active"},"Add Icons"))))},D=function(){return l.a.createElement("div",null,l.a.createElement("p",{className:"is-size-4 has-text-danger has-text-weight-bold"},"Error 404! Page Not Found"))},R=(t(33),t(35),function(e){function a(e){var t;return Object(i.a)(this,a),(t=Object(d.a)(this,Object(u.a)(a).call(this,e))).openNotification=function(e,a){v.a[e](l.a.createElement("strong",null,a),{duration:5})},t.componentDidMount=function(){var e=localStorage.getItem("loggedIn");t.setState({loggedIn:e})},t.login=function(e,a,n){e.preventDefault();var l=JSON.stringify({email:a,password:n});fetch("".concat(b,"/admin/login"),{method:"POST",body:l,headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){if("failure"===e.status)console.log("errors"),t.openNotification("error",e.data);else{var a=e.data.token;localStorage.setItem("token",a),localStorage.setItem("loggedIn",!0),t.setState({loggedIn:!0}),t.props.history.push("/"),t.openNotification("success",e.message)}}).catch(function(e){return console.log(e)})},t.logOut=function(e){e.preventDefault();var a=localStorage.getItem("token");fetch("".concat(b,"/admin/logout"),{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":a}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?(console.log("errors"),localStorage.clear(),t.setState({loggedIn:!1})):(localStorage.clear(),t.setState({loggedIn:!1}))}).catch(function(e){return console.log(e)})},t.changePasswordDialogue=function(){t.setState({style:"is-active"})},t.closeModal=function(){t.setState({style:""})},t.changePassword=function(e){e.preventDefault();var a=t.state,n=a.oPassword,l=a.nPassword,s=JSON.stringify({oPassword:n,nPassword:l}),c=localStorage.getItem("token");fetch("".concat(b,"/admin/change-password"),{method:"POST",body:s,headers:{"Content-Type":"application/json","x-auth-token":c}}).then(function(e){if(!e.ok)throw Error(e.status);return e}).then(function(e){return e.json()}).then(function(e){"failure"===e.status?(console.log(e.message),t.openNotification("error",e.message)):(console.log(e),t.openNotification("success",e.message),t.setState({style:"",oPassword:"",nPassword:""}))}).catch(function(e){return console.log(e)})},t.handleChange=function(e){t.setState(Object(o.a)({},e.target.name,e.target.value))},t.state={loggedIn:!1,style:"",oPassword:"",nPassword:""},t}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.loggedIn,s=a.style,c=a.oPassword,r=a.nPassword;return l.a.createElement(n.Fragment,null,t?l.a.createElement(k,{logOut:this.logOut,changePassword:this.changePasswordDialogue}):l.a.createElement(n.Fragment,null,l.a.createElement(x,{loggedIn:!1}),l.a.createElement(y,{login:function(a,t,n){return e.login(a,t,n)}})),l.a.createElement("div",{className:"container is-widescreen"},l.a.createElement("div",{className:"columns is-centered is-3"},l.a.createElement(E.a,null,l.a.createElement(n.Fragment,null,l.a.createElement("div",{className:"column is-one-quarter"},t?l.a.createElement(q,null):""),l.a.createElement("div",{className:"column is-three-quarters"},l.a.createElement(f.a,null,l.a.createElement(L,{exact:!0,path:"/",component:P}),l.a.createElement(L,{path:"/add-restaurant",component:O}),l.a.createElement(L,{path:"/add-icons",component:I}),l.a.createElement(L,{component:D}))))))),l.a.createElement("div",{className:"modal ".concat(s)},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-content",style:{zIndex:1}},l.a.createElement("div",{className:"tile is-parent"},l.a.createElement("article",{className:"tile is-child notification "},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"file"},l.a.createElement("form",{onSubmit:this.changePassword},l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"Current Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"password",name:"oPassword",placeholder:"Current Password",value:c,onChange:this.handleChange,required:!0}))),l.a.createElement("div",{className:"field"},l.a.createElement("label",{className:"label"},"New Password"),l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input",type:"password",name:"nPassword",placeholder:"New Password",value:r,onChange:this.handleChange,required:!0}))),l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-primary"},"Submit")))))))),l.a.createElement("div",{onClick:this.closeModal,style:{minWidth:"100%",minHeight:"100%",position:"absolute"}},l.a.createElement("button",{className:"modal-close is-large","aria-label":"close"}))))}}]),a}(n.Component)),L=function(e){function a(){return Object(i.a)(this,a),Object(d.a)(this,Object(u.a)(a).apply(this,arguments))}return Object(h.a)(a,e),Object(m.a)(a,[{key:"render",value:function(){var e;e="true"===localStorage.getItem("loggedIn");var a=this.props,t=a.component,n=Object(r.a)(a,["component"]);return l.a.createElement(N.a,Object.assign({},n,{render:function(a){return e?l.a.createElement(t,a):l.a.createElement(p.a,{to:"/"})}}))}}]),a}(n.Component),F=R;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,2,1]]]);
//# sourceMappingURL=main.d19c4776.chunk.js.map